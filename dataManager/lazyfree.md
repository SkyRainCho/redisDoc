# Redis中的惰性删除策略

在前面对于数据库键空间的基础操作时，我们已经了解到，在*Redis*在从键空间中删除一个*key*可以采取一种**惰性删除**的策略，应用这种策略的原因在于对于某些数据对象的释放需要消耗过多的系统资源，如果在*Redis*的主线程中采用同步的方式去删除以及释放这样的*key-value*数据，那么会导致系统长时间的阻塞在释放数据操作上，而无法处理其他的业务逻辑。对于这种情况，我们以**惰性删除**的策略，使用一个后台线程，通过异步的方式来对数据对象进行释放，无疑是一种较为合适的选择。

在*src/lazyfree.c*源文件中定义了关于*Redis*中**惰性删除**策略的相关逻辑，在这个源文件中代码的实现主要分为两个部分：
1. 对于数据的异步释放，这里会将待释放的数据加入到*Redis*中一个后台任务队列之中，由一个专门的线程，按照**FIFO**的策略，依次将待释放的数据进行释放。
2. 为释放线程提供释放数据所用到的函数接口。



***
![公众号二维码](https://machiavelli-1301806039.cos.ap-beijing.myqcloud.com/qrcode_for_gh_836beef2355a_344.jpg)

喜欢的同学可以扫描二维码，关注我的微信公众号，*马基雅维利incoding*